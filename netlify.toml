[build]
  publish = "."
[functions]
  directory = "testimony/netlify/functions"
  node_bundler = "esbuild"
[dev]
  publish = "."
  functions = "testimony/netlify/functions"
  port = 8888

# Cache headers for static assets (Netlify handles gzip/brotli automatically)
[[headers]]
  for = "/imagesWebp/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/images/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.css"
  [headers.values]
    Cache-Control = "public, max-age=15552000"

[[headers]]
  for = "*.js"
  [headers.values]
    Cache-Control = "public, max-age=15552000"

[[headers]]
  for = "/images/favicon/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/favicon.ico"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# Redirect .html variants to extensionless canonical URLs
[[redirects]]
  from = "/index.html"
  to = "/"
  status = 301
  force = true

[[redirects]]
  from = "/index-es.html"
  to = "/index-es"
  status = 301
  force = true

[[redirects]]
  from = "/experiences.html"
  to = "/experiences"
  status = 301
  force = true

[[redirects]]
  from = "/experiences-es.html"
  to = "/experiences-es"
  status = 301
  force = true

# ========================================================================
# DESTINATION LANDING PAGES - CRITICAL FOR GSC VALIDATION
# These redirects fix the "Page with redirect" errors in Google Search Console
# ========================================================================

[[redirects]]
  from = "/Medjugorje.html"
  to = "/medjugorje"
  status = 301
  force = true

[[redirects]]
  from = "/Medjugorje-es.html"
  to = "/medjugorje-es"
  status = 301
  force = true

[[redirects]]
  from = "/Medjugorje2026.html"
  to = "/medjugorje2026"
  status = 301
  force = true

[[redirects]]
  from = "/Medjugorje2026-es.html"
  to = "/medjugorje2026-es"
  status = 301
  force = true

[[redirects]]
  from = "/TierraSanta2026.html"
  to = "/tierrasanta2026"
  status = 301
  force = true

[[redirects]]
  from = "/TierraSanta2026-es.html"
  to = "/tierrasanta2026-es"
  status = 301
  force = true

[[redirects]]
  from = "/Italy.html"
  to = "/italy"
  status = 301
  force = true

[[redirects]]
  from = "/Italy-es.html"
  to = "/italy-es"
  status = 301
  force = true

[[redirects]]
  from = "/SantuariosMarianos.html"
  to = "/santuariosmarianos"
  status = 301
  force = true

[[redirects]]
  from = "/SantuariosMarianos-es.html"
  to = "/santuariosmarianos-es"
  status = 301
  force = true

# ========================================================================
# SUPPORTING PAGES - Add missing redirects for about, contact, blog, guidelines
# ========================================================================

[[redirects]]
  from = "/about.html"
  to = "/about"
  status = 301
  force = true

[[redirects]]
  from = "/about-es.html"
  to = "/about-es"
  status = 301
  force = true

[[redirects]]
  from = "/contact.html"
  to = "/contact"
  status = 301
  force = true

[[redirects]]
  from = "/contact-es.html"
  to = "/contact-es"
  status = 301
  force = true

[[redirects]]
  from = "/blog.html"
  to = "/blog"
  status = 301
  force = true

[[redirects]]
  from = "/blog-es.html"
  to = "/blog-es"
  status = 301
  force = true

[[redirects]]
  from = "/guidelines.html"
  to = "/guidelines"
  status = 301
  force = true

[[redirects]]
  from = "/guidelines-es.html"
  to = "/guidelines-es"
  status = 301
  force = true

# ========================================================================
# LOWERCASE VARIANTS - Handle case-insensitive .html requests
# These catch requests to lowercase .html files and redirect to canonical URLs
# ========================================================================

[[redirects]]
  from = "/medjugorje.html"
  to = "/medjugorje"
  status = 301
  force = true

[[redirects]]
  from = "/medjugorje-es.html"
  to = "/medjugorje-es"
  status = 301
  force = true

[[redirects]]
  from = "/medjugorje2026.html"
  to = "/medjugorje2026"
  status = 301
  force = true

[[redirects]]
  from = "/medjugorje2026-es.html"
  to = "/medjugorje2026-es"
  status = 301
  force = true

[[redirects]]
  from = "/santuariosmarianos.html"
  to = "/santuariosmarianos"
  status = 301
  force = true

[[redirects]]
  from = "/santuariosmarianos-es.html"
  to = "/santuariosmarianos-es"
  status = 301
  force = true

[[redirects]]
  from = "/tierrasanta2026.html"
  to = "/tierrasanta2026"
  status = 301
  force = true

[[redirects]]
  from = "/tierrasanta2026-es.html"
  to = "/tierrasanta2026-es"
  status = 301
  force = true

[[redirects]]
  from = "/italy.html"
  to = "/italy"
  status = 301
  force = true

[[redirects]]
  from = "/italy-es.html"
  to = "/italy-es"
  status = 301
  force = true

[[redirects]]
  from = "/france.html"
  to = "/france"
  status = 301
  force = true

[[redirects]]
  from = "/france-es.html"
  to = "/france-es"
  status = 301
  force = true

[[redirects]]
  from = "/mariana2026.html"
  to = "/mariana2026"
  status = 301
  force = true

[[redirects]]
  from = "/mariana2026-es.html"
  to = "/mariana2026-es"
  status = 301
  force = true

# Redirect experience subpages (.html -> extensionless)
[[redirects]]
  from = "/experiences/catholic-pilgrimage-rome-jubilee-2025.html"
  to = "/experiences/catholic-pilgrimage-rome-jubilee-2025"
  status = 301
  force = true

[[redirects]]
  from = "/experiences/catholic-sanctuaries-2025.html"
  to = "/experiences/catholic-sanctuaries-2025"
  status = 301
  force = true

[[redirects]]
  from = "/experiences/medjugorje2017.html"
  to = "/experiences/medjugorje2017"
  status = 301
  force = true

[[redirects]]
  from = "/experiences/medjugorje2019.html"
  to = "/experiences/medjugorje2019"
  status = 301
  force = true

[[redirects]]
  from = "/experiences/medjugorje2022.html"
  to = "/experiences/medjugorje2022"
  status = 301
  force = true

[[redirects]]
  from = "/experiences/medjugorje2023.html"
  to = "/experiences/medjugorje2023"
  status = 301
  force = true

[[redirects]]
  from = "/experiences/medjugorje2024.html"
  to = "/experiences/medjugorje2024"
  status = 301
  force = true

[[redirects]]
  from = "/experiences/tierra-santa-2022.html"
  to = "/experiences/tierra-santa-2022"
  status = 301
  force = true

[[redirects]]
  from = "/experiences/tierrasanta2016.html"
  to = "/experiences/tierrasanta2016"
  status = 301
  force = true

[[redirects]]
  from = "/experiences/tierrasanta2017.html"
  to = "/experiences/tierrasanta2017"
  status = 301
  force = true

[[redirects]]
  from = "/experiences/tierrasanta2018.html"
  to = "/experiences/tierrasanta2018"
  status = 301
  force = true

[[redirects]]
  from = "/experiences/tierrasanta2019.html"
  to = "/experiences/tierrasanta2019"
  status = 301
  force = true

[[redirects]]
  from = "/experiences/tierrasanta2021.html"
  to = "/experiences/tierrasanta2021"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/medjugorje-2017-es.html"
  to = "/es/experiences/medjugorje-2017-es"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/medjugorje-2019-es.html"
  to = "/es/experiences/medjugorje-2019-es"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/medjugorje-2022-es.html"
  to = "/es/experiences/medjugorje-2022-es"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/medjugorje-2023-es.html"
  to = "/es/experiences/medjugorje-2023-es"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/medjugorje-2024-es.html"
  to = "/es/experiences/medjugorje-2024-es"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/peregrinacion-catolica-roma-jubileo-2025.html"
  to = "/es/experiences/peregrinacion-catolica-roma-jubileo-2025"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/santuarios-catolicos-2025-es.html"
  to = "/es/experiences/santuarios-catolicos-2025-es"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/tierra-santa-2016-es.html"
  to = "/es/experiences/tierra-santa-2016-es"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/tierra-santa-2017-es.html"
  to = "/es/experiences/tierra-santa-2017-es"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/tierra-santa-2018-es.html"
  to = "/es/experiences/tierra-santa-2018-es"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/tierra-santa-2019-es.html"
  to = "/es/experiences/tierra-santa-2019-es"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/tierra-santa-2021-es.html"
  to = "/es/experiences/tierra-santa-2021-es"
  status = 301
  force = true

[[redirects]]
  from = "/es/experiences/tierra-santa-2022-es.html"
  to = "/es/experiences/tierra-santa-2022-es"
  status = 301
  force = true

[[redirects]]
  from = "/Medjugorje2026-ads-es.html"
  to = "/peregrinacion-medjugorje-2026-2027-es"
  status = 301
  force = true
