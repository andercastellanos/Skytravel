(function(){'use strict';if(window.languageSwitcherInitialized)return;window.languageSwitcherInitialized=true;function init(){enhanceDesktopSwitcher();if(window.matchMedia('(max-width:768px)').matches){buildMobileSwitcher();}}function enhanceDesktopSwitcher(){var links=document.querySelectorAll('.language-switcher a');links.forEach(function(link){link.addEventListener('click',function(e){e.preventDefault();var url=this.getAttribute('href');document.body.classList.add('page-transitioning');setTimeout(function(){window.location.href=url;},200);});});}function buildMobileSwitcher(){var existing=document.querySelectorAll('.mobile-language-switcher');existing.forEach(function(el){el.remove();});var activeLangEl=document.querySelector('.language-switcher .active-lang')||document.querySelector('.language-switcher .lang-option.active');var currentLang=activeLangEl?activeLangEl.textContent.trim():'EN';var optionEls=document.querySelectorAll('.language-switcher .lang-option');var langOptions=[];optionEls.forEach(function(el){langOptions.push({lang:escapeHtml(el.textContent.trim()),url:escapeHtml(el.getAttribute('href')),active:el.classList.contains('active-lang')||el.classList.contains('active')});});if(!langOptions.length)return;var wrapper=document.createElement('div');wrapper.innerHTML=generateMobileHTML(currentLang,langOptions);var dropdown=wrapper.firstElementChild;var menuToggle=document.querySelector('.menu-toggle');if(menuToggle&&menuToggle.parentNode){menuToggle.parentNode.insertBefore(dropdown,menuToggle);}bindMobileEvents(dropdown);}function generateMobileHTML(current,options){var optionsHTML=options .map(function(option){return '<a href="'+option.url+'" class="'+(option.active?'active':'')+'" role="menuitem">'+option.lang+'</a>';}).join('');return '<div class="mobile-language-switcher">'+'<button class="mobile-lang-toggle" type="button" aria-haspopup="true" aria-expanded="false">'+'<span class="current-lang">'+escapeHtml(current)+'</span>'+'<span class="toggle-arrow">\u25BC</span>'+'</button>'+'<div class="mobile-lang-options" role="menu">'+optionsHTML+'</div>'+'</div>';}function bindMobileEvents(root){var toggle=root.querySelector('.mobile-lang-toggle');var options=root.querySelector('.mobile-lang-options');var arrow=toggle?toggle.querySelector('.toggle-arrow'):null;if(!toggle||!options)return;toggle.addEventListener('click',function(e){e.stopPropagation();var isOpen=options.style.display==='block';var willOpen=!isOpen;options.style.display=willOpen?'block':'none';toggle.setAttribute('aria-expanded',String(willOpen));toggle.classList.toggle('active',willOpen);if(arrow)arrow.classList.toggle('rotated',willOpen);});var optionLinks=options.querySelectorAll('a');optionLinks.forEach(function(link){link.addEventListener('click',function(e){e.preventDefault();var targetUrl=this.getAttribute('href');var selectedLang=this.textContent.trim();var currentLangEl=toggle.querySelector('.current-lang');if(currentLangEl)currentLangEl.textContent=selectedLang;closeDropdown(toggle,options,arrow);document.body.classList.add('page-transitioning');setTimeout(function(){window.location.href=targetUrl;},200);});});document.addEventListener('click',function(e){if(!e.target.closest('.mobile-language-switcher')){closeDropdown(toggle,options,arrow);}});document.addEventListener('keydown',function(e){if(e.key==='Escape'&&options.style.display==='block'){closeDropdown(toggle,options,arrow);toggle.focus();}});}function closeDropdown(toggle,options,arrow){if(options)options.style.display='none';if(toggle){toggle.setAttribute('aria-expanded','false');toggle.classList.remove('active');}if(arrow)arrow.classList.remove('rotated');}function escapeHtml(text){var map={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'};return text.replace(/[&<>"']/g,function(m){return map[m];});}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',init);}else{init();}var resizeTimer;window.addEventListener('resize',function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){var existing=document.querySelectorAll('.mobile-language-switcher');existing.forEach(function(el){el.remove();});if(window.matchMedia('(max-width:768px)').matches){buildMobileSwitcher();}},250);});})();